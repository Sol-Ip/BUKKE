<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="activityMapper">
	
	<resultMap type="Activity" id="ActivityResultMap">
		<id property="activityNo" column="ACTIVITY_NO"></id>
		<result property="shopId" column="SHOP_ID"></result> 
		<result property="activityName" column="ACTIVITY_NAME"></result> 
		<result property="activityAddr" column="ACTIVITY_ADDR"></result> 
		<result property="activityType" column="ACTIVITY_TYPE"></result> 
		<result property="activityTypeDetails" column="ACTIVITY_TYPEDETAILS"></result> 
		<result property="activityInfo" column="ACTIVITY_INFO"></result> 
		<result property="activityPrice" column="ACTIVITY_PRICE"></result>
		<result property="activityCapacity" column="ACTIVITY_CAPACITY"></result> 
		<result property="activityEnrolldate" column="ACTIVITY_ENROLL_DATE"></result> 
		<result property="activityStartdate" column="ACTIVITY_START_DATE"></result> 
		<result property="activityEnddate" column="ACTIVITY_END_DATE"></result> 
		<result property="activityStatus" column="ACTIVITY_STATUS"></result> 
		<result property="aOriginalFilename" column="A_ORIGINAL_FILENAME"></result> 
		<result property="aRenameFilename" column="A_RENAME_FILENAME"></result> 
	</resultMap>

	 <select id="selectListActivityCount" resultType="_int">
		SELECT COUNT (*) FROM ACTIVITY WHERE ACTIVITY_STATUS = 'Y'
	</select>

	<select id="selectAllActivityList" resultMap="ActivityResultMap">
		SELECT * FROM ACTIVITY WHERE ACTIVITY_STATUS = 'Y' ORDER BY ACTIVITY_NO DESC
	</select>

	<select id="selectActivityOne" resultMap="ActivityResultMap">
		SELECT * FROM ACTIVITY WHERE ACTIVITY_NO = #{activityNo} AND ACTIVITY_STATUS = 'Y'
	</select>

	<insert id="insertActivity">
		INSERT INTO ACTIVITY VALUES(SEQ_ACTIVITY_NO.NEXTVAL, 'shoptest',
		#{activityName},#{activityAddr}, #{activityType},NULL, #{activityInfo}, #{activityPrice}, #{activityCapacity},
		 SYSDATE, #{activityStartdate}, #{activityEnddate},DEFAULT,#{aOriginalFilename}, #{aRenameFilename})
	</insert>

	<update id="updateActivity">
   		UPDATE ACTIVITY SET ACTIVITY_NAME = #{activityName }, ACTIVITY_ADDR = #{activityAddr }, 
   		ACTIVITY_TYPE = #{activityType }, NULL, ACTIVITY_INFO = #{activityInfo }, ACTIVITY_PRICE = #{activityPrice }, 
   		ACTIVITY_START_DATE = #{activityStartdate }, ACTIVITY_END_DATE = #{activityEnddate }, 
   		A_ORIGINAL_FILENAME = #{aOriginalFilename }, SYSDATE, A_RENAME_FILENAME = #{aRenameFilename }
   		WHERE ACTIVITY_NO = #{activityNo }
   </update>
	
	<!-- 삭제인 것 처럼 보여지는 것! -->
	<update id="deleteActivity" parameterType="_int">
		UPDATE ACTIVITY SET ACTIVITY_STATUS = 'N' WHERE ACTIVITY_NO = #{activityNo }
	</update>
	
	<!-- 조회 수
	<update id="updateActivityCount">
		UPDATE ACTIVITY SET ACTIVITY_COUNT = ACTIVITY_COUNT + 1 WHERE ACTIVITY_NO = #{activityNo }
	</update> -->
	
</mapper>