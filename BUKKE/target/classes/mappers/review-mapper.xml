<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="reviewMapper">

	<resultMap type="Review" id="reviewResultMap">
		<id property="reviewNo" column="REVIEW_NO"></id>
		<result property="memberId" column="MEMBER_ID"></result>
		<result property="reviewTitle" column="REVIEW_TITLE"></result>
		<result property="reviewContents" column="REVIEW_CONTENTS"></result>
		<result property="reviewDate" column="REVIEW_DATE"></result>
		<result property="reviewStatus" column="REVIEW_STATUS"></result>
		<result property="rOriginalFilename" column="R_ORIGINAL_FILENAME"></result>
		<result property="rRenameFilename" column="R_RENAME_FILENAME"></result>
		
	</resultMap>
	
	<select id="selectReviewList" resultMap="reviewResultMap">
		SELECT * FROM REVIEW WHERE REVIEW_STATUS = 'Y' ORDER BY REVIEW_NO DESC
	</select>
	
	<select id="selectOne" resultMap="reviewResultMap">
		SELECT * FROM REVIEW WHERE REVIEW_NO = #{reviewNo }
	</select>
	
	 
	<insert id="insertReview" parameterType="Review">
		INSERT INTO REVIEW VALUES(SEQ_REVIEWID.NEXTVAL,  #{memberId }, #{reviewTitle }, #{reviewContents }, SYSDATE, 'Y', #{rOriginalFilename },#{rRenameFilename })
	</insert>
	
	
	<update id="updateReview">
		UPDATE REVIEW
		SET REVIEW_TITLE = #{reviewTitle }, REVIEW_CONTENTs = #{reviewContents }, R_ORIGINAL_FILENAME = #{rOriginalFilename }, R_RENAME_FILENAME = #{rRenameFilename },REVIEW_DATE = SYSDATE
		WHERE REVIEW_NO = #{reviewNo }
	</update>

	<update id="deleteReview" parameterType="_int">
		UPDATE REVIEW
		SET REVIEW_STATUS = 'N'
		WHERE REVIEW_NO = #{reviewNo }
	</update>

</mapper>